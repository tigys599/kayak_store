<%- layout ('layouts/boilerplate') %>




    <script src='https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js' crossorigin></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css' crossorigin rel='stylesheet' />


    <nav class="nav">
        <p class="nav__logo">Kayaks4Life</p>
        <a class="nav__item" aria-current="page" href="/">Home</a>

        <a class="nav__item nav__selected" href="/launchLocations">Launch Locations</a>
        <% if(!currentUser){ %>
            <a class="nav__item" href=" /login">Login</a>
            <a class="nav__item" href="/register">Register</a>
            <% }else{ %>
                <a class="nav__item" href="/logout">Logout</a>
                <% } %>

    </nav>


    <body class="indexbody">


        <div id="cluster-map"></div>
        <main class="">
            <div class="">
                <%- include('../partials/flash') %>
            </div>
            <h1 class="">All Launch Locations</h1>


            <% for(campground of campgrounds){ %>

                <div class="card mb-3">
                    <div class="row">
                        <div class="col-md-4">
                            <% if(campground.image.length) {%>
                                <img class="img-fluid" alt="" src=<%=campground.image[0].url %> >
                                <% }else{ %>
                                    <img class="img-fluid" alt=""
                                        src="https://images.unsplash.com/photo-1501697372968-40fa90cd1da3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8NjR8NDgzMjUxfHxlbnwwfHx8fA%3D%3D&auto=format&fit=crop&w=500&q=60">
                                    <% } %>
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%= campground.title %>
                                </h5>
                                <p class="card-text">
                                    <%= campground.description %>
                                </p>
                                <p class="card-text text-white-50">
                                    <%= campground.location %>
                                </p>
                                <a class="btn btn-primary" href="/campgrounds/<%= campground.id %>">View <%=
                                        campground.title %> </a>
                            </div>
                        </div>
                    </div>
                </div>

                <% } %>

        </main>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
        <script>


            const campgrounds = { features: <% - JSON.stringify(campgrounds) %>}
            const mapToken = '<%= process.env.MAPBOX_TOKEN %>'
        </script>
        <script src="/jscripts/clusterMap.js"></script>




    </body>

    </html>